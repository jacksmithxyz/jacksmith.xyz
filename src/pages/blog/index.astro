---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogCard from "../../components/organisms/BlogCard.astro";

const posts = await getCollection("blog");

const sortedPosts = posts.sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout>
    <div>
        <h1>Posts</h1>
        <p>
            My collection of blog posts on technical topics, projects, learning,
            and more.
        </p>
        <ul>
            {
                sortedPosts.map((post) => (
                    <li>
                        <BlogCard
                            url={`/blog/${post.id}`}
                            title={post.data.title}
                        />
                    </li>
                ))
            }
        </ul>
    </div>
</Layout>

<style>
    div {
        margin-bottom: 4rem;
    }

    ul {
        list-style-type: none;
        margin-left: -2.5rem;
    }
</style>
