---
import { getCollection } from "astro:content";
import Hero from "../components/organisms/Hero.astro";
import Layout from "../layouts/Layout.astro";
import BlogCard from "../components/organisms/BlogCard.astro";

const posts = await getCollection("blog");

const sortedPosts = posts.sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout>
    <div>
        <Hero />
        <div class="mb-16">
            <h1 class="text-2xl font-semibold mb-8">Recent posts</h1>
            <div>
                <ul class="space-y-8 mb-16">
                    {
                        sortedPosts.slice(0, 5).map((post) => (
                            <li>
                                <BlogCard
                                    url={`/blog/${post.id}`}
                                    title={post.data.title}
                                    date={post.data.date.toLocaleDateString(
                                        "en-GB",
                                        {
                                            day: "2-digit",
                                            month: "long",
                                            year: "numeric",
                                        },
                                    )}
                                    description={post.data.description}
                                />
                            </li>
                        ))
                    }
                </ul>
            </div>
    </div>
</Layout>
