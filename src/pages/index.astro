---
import { getCollection } from "astro:content";
import Hero from "../components/organisms/Hero.astro";
import Layout from "../layouts/Layout.astro";
import BlogCard from "../components/organisms/BlogCard.astro";

const posts = await getCollection("blog");

const sortedPosts = posts.sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout>
    <div>
        <Hero />
        <div>
            <h1>Recent posts</h1>
            <div>
                <ul>
                    {
                        sortedPosts.slice(0, 5).map((post) => (
                            <li>
                                <BlogCard
                                    url={`/blog/${post.id}`}
                                    title={post.data.title}
                                />
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>
    </div>
</Layout>

<style>
    ul {
        list-style-type: none;
        margin-left: 0;
    }
</style>
